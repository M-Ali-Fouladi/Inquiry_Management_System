@*@model IEnumerable<CustomMembershipEF.Models.InquiryViewModel>*@

@{
    ViewBag.Title = "Manage_Operation";
}

<h2>Manage_Operation</h2>
    @(Html.Kendo().Grid<CustomMembershipEF.Models.InquiryViewModel>()
                .Name("grid")
                .Columns(columns =>
                {
                    columns.Bound(c => c.Inquiry_Main_ID);
                    columns.Bound(c => c.Inquiry_Element);
                    columns.Bound(c => c.Inquiry_Date);
                    columns.Bound(c => c.Inquiry_Vahed);
                    columns.Bound(c => c.Inquiry_Type);
                    columns.Bound(c => c.Inquiry_Name);
                    columns.Bound(c => c.Inquiry_NeededDate);
                    columns.Command(command => command.Custom("ویرایش آزمون").Click("showDetails")).Width(180);


                })
                 .Pageable(pageable => pageable
                .Refresh(true)
                .PageSizes(true)
                .ButtonCount(5))
                .Sortable()
                .Scrollable()
                  .HtmlAttributes(new { style = "height:550px;" })
                   .Filterable(filterable => filterable
        .Extra(false)
        .Operators(operators => operators
            .ForString(str => str.Clear()
                .StartsWith("شروع شود با")
                .IsEqualTo("برابر باشد با")
                .IsNotEqualTo("مخالف باشد با")
                .Contains("شبیه باشد با")
            ))
        )
                .DataSource(dataSource => dataSource
                .Ajax()
                .PageSize(10)
            // .Events(events => events.Error("error_handler"))
            // .Model(model => model.Id(p => p.Id))
            //.Create(update => update.Action("EditingPopup_Create", "Home"))
            .Read(read => read.Action("ManageOperationPopup_Read", "Home"))
                //.Update(update => update.Action("EditingPopup_Update", "Home"))
                )
    )
@*@(Html.Kendo().Window().Name("Details")
                    .Title("Customer Details")
                    .Visible(false)
                    .Modal(true)
                    .Draggable(true)
                    .Width(300)
)*@
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

            </div>

        </div>
    </div>
</div>

@*<div class="modal fade"  id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  
    <div class="modal-dialog modal-lg"  role="document" >          
        <div class="modal-content" >
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

            </div>

        </div>
    </div>
   
</div>*@


<script type="text/javascript">
        var detailsTemplate = kendo.template($("#template").html());

        function showDetails(e) {
            e.preventDefault();
            var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
              $.get("@Url.Action("_Update_Operation", "Home")/" + dataItem.Id,
                function (data) { $(".modal-body").html(data); })
                $('#exampleModal').modal('show');

            //$.ajax({
            //    url: '/Home/_Update_inquiry',
            //    dataType: "json",
            //    type: "POST",
            //    contentType: 'application/json; charset=utf-8',
            //    data: JSON.stringify({Id: dataItem.Id,}),
            //    async: true,
            //    processData: false,
            //    cache: false,
            //    success: function (data) {
            //        alert(dataItem.Id);
            //    },
            //    error: function (xhr) {
            //        alert('error');
            //    }
            //})


        }
        //$('#btn').click(function () {
        //    //do something
        //    alert('');
        //});
</script>


    <style>
        .vertical-alignment-helper {
            display: table;
            height: 100%;
            width: 100%;
            pointer-events: none; /* This makes sure that we can still click outside of the modal to close it */
        }
      
            /* must be half of the width, minus scrollbar on the left (30px) */
      
        .customer-photo {
            display: inline-block;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-size: 32px 35px;
            background-position: center center;
            vertical-align: middle;
            line-height: 32px;
            box-shadow: inset 0 0 1px #999, inset 0 0 10px rgba(0,0,0,.2);
            margin-left: 5px;
        }

        .customer-name {
            display: inline-block;
            vertical-align: middle;
            line-height: 32px;
            padding-left: 3px;
        }
    </style>
