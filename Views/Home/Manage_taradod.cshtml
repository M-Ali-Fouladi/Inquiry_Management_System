@model IEnumerable<CustomMembershipEF.Models.InquiryViewModel>

    @{
        ViewBag.Title = "Manage_taradod";
    }

    <h2>Manage_taradod</h2>


    @(Html.Kendo().Grid(Model)
            .Name("grid")
            .Columns(columns =>
            {
                columns.Bound(c => c.Inquiry_ID).Width(50).Title("کد");
                columns.Bound(c => c.Inquiry_Main_ID).Width(130);
                columns.Bound(c => c.Inquiry_Element).Width(130);
                columns.Bound(c => c.Inquiry_Date).Width(110);
                columns.Bound(c => c.Inquiry_Vahed).Width(130);
                columns.Bound(c => c.Inquiry_Type).Width(130) ;
                columns.Bound(c => c.Inquiry_Name);
                columns.Bound(c => c.Inquiry_NeededDate);
                columns.Bound(c => c.Inquiry_NeededDate);
                columns.Bound(c => c.Inquiry_NeededDate);
                columns.Bound(c => c.Inquiry_NeededDate);

                columns.Command(command => command.Custom("ViewDetails").Click("showDetails")).Width(180);
            })

              .Pageable(pageable => pageable
                .Refresh(true)
                .PageSizes(true)
                .ButtonCount(5))
                .Sortable()
                .Scrollable()
                  .HtmlAttributes(new { style = "height:550px;" })
                  .Filterable(filterable => filterable
        .Extra(false)
        .Operators(operators => operators
            .ForString(str => str.Clear()
                .StartsWith("شروع شود با")
                .IsEqualTo("برابر باشد با")
                .IsNotEqualTo("مخالف باشد با")
                .Contains("شبیه باشد با")
            ))
        )
                .DataSource(dataSource => dataSource
                .Ajax()
                .PageSize(10)
            // .Events(events => events.Error("error_handler"))
            // .Model(model => model.Id(p => p.Id))
            //.Create(update => update.Action("EditingPopup_Create", "Home"))
            .Read(read => read.Action("TaradodPopup_Read", "Home"))
            //.Update(update => update.Action("EditingPopup_Update", "Home"))
            //.Destroy(update => update.Action("EditingPopup_Destroy", "Home"))
            )
    )
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                </div>

            </div>
        </div>
    </div>


    <script type="text/javascript">
        var detailsTemplate = kendo.template($("#template").html());

        function showDetails(e) {
            e.preventDefault();
            var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
            $.get("@Url.Action("_Update_Taradod", "Home")/" + dataItem.Inquiry_ID,
                function (data) { $(".modal-body").html(data); })
                $('#exampleModal').modal('show');

            //$.ajax({
            //    url: '/Home/_Update_inquiry',
            //    dataType: "json",
            //    type: "POST",
            //    contentType: 'application/json; charset=utf-8',
            //    data: JSON.stringify({Id: dataItem.Id,}),
            //    async: true,
            //    processData: false,
            //    cache: false,
            //    success: function (data) {
            //        alert(dataItem.Id);
            //    },
            //    error: function (xhr) {
            //        alert('error');
            //    }
            //})


        }
        //$('#btn').click(function () {
        //    //do something
        //    alert('');
        //});
    </script>

